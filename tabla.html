<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <link rel="stylesheet" href="./assets/bootstrap-3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" href="./assets/jquery-ui-1.12.1/jquery-ui.min.css">
    <style>
        .row-table {
            height: 44vh;
        }

        .tilt {
            transform: rotate(3deg);
            -moz-transform: rotate(3deg);
            -webkit-transform: rotate(3deg);
        }

        td .col-height {
            height: 182px !important;
        }

        .panel-heading {
            cursor: move;
        }
    </style>
</head>

<body style="margin-top: 30px;">
    <div class="container" style="overflow-x: scroll;">
        <div style="width: 2100px;">
            <table border="1" class="table table-bordered">
                <tr height="50">
                    <td align="center" width="300" rowspan="2">Ready (6)</td>
                    <td align="center" width="600" colspan="2">Analisis (3)</td>
                    <td align="center" width="600" colspan="2">Desarrollo (5)</td>
                    <td align="center" width="300" rowspan="2">Test (6)</td>
                    <td align="center" width="300" rowspan="2">Deployed (6)</td>
                </tr>
                <tr height="50">
                    <td align="center" width="300">En proceso</td>
                    <td align="center" width="300">Terminado</td>
                    <td align="center" width="300">En proceso</td>
                    <td align="center" width="300">Terminado</td>
                </tr>
                <tr height="50">
                    <td align="center" width="300" height="200">Expedite (+1)</td>
                    <td width="300">
                        <div class="row">
                            <div class="col-lg-12 col-height" id="new">

                            </div>
                        </div>
                    </td>
                    <td width="300">
                        <div class="row">
                            <div class="col-lg-12 col-height">

                            </div>
                        </div>
                    </td>
                    <td width="300">
                        <div class="row">
                            <div class="col-lg-12 col-height">

                            </div>
                        </div>
                    </td>
                    <td width="300">
                        <div class="row">
                            <div class="col-lg-12 col-height">

                            </div>
                        </div>
                    </td>
                    <td width="300">
                        <div class="row">
                            <div class="col-lg-12 col-height">

                            </div>
                        </div>
                    </td>
                    <td width="300">
                        <div class="row">
                            <div class="col-lg-12 col-height">

                            </div>
                        </div>
                    </td>
                </tr>
                <tr id="newheight" style="min-height: 200px;">
                    <td class="row-table" align="center" width="300">
                        <button class="btn btn-success btn-block" style="margin-bottom: 8px;" id="btnAgregar">Agregar</button>
                        <div class="row">
                            <div class="col-lg-12"  id="colum-pendientes">
                                <div class="panel panel-default" style="text-align: left;" id="event1">
                                    <div class="panel-heading">Titulo</div>
                                    <div class="panel-body">
                                        Descripcion
                                    </div>
                                    <table class="table table-bordered">
                                        <tr>
                                            <td colspan="2">Dificultad</td>
                                        </tr>
                                        <tr>
                                            <td>Inicio</td>
                                            <td>Termino</td>
                                        </tr>
                                    </table>
                                </div>

                                <div class="panel panel-default" style="text-align: left;" id="event2">
                                    <div class="panel-heading">Titulo</div>
                                    <div class="panel-body">
                                        Descripcion
                                    </div>
                                    <table class="table table-bordered">
                                        <tr>
                                            <td colspan="2">Dificultad</td>
                                        </tr>
                                        <tr>
                                            <td>Inicio</td>
                                            <td>Termino</td>
                                        </tr>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td width="300">
                        <div class="row">
                            <div class="col-lg-12 col-height-2" >

                            </div>
                        </div>
                    </td>
                    <td width="300">
                        <div class="row">
                            <div class="col-lg-12 col-height-2" >

                            </div>
                        </div>
                    </td>
                    <td width="300">
                        <div class="row">
                            <div class="col-lg-12 col-height-2" >

                            </div>
                        </div>
                    </td>
                    <td width="300">
                        <div class="row">
                            <div class="col-lg-12 col-height-2" >

                            </div>
                        </div>
                    </td>
                    <td width="300">
                        <div class="row">
                            <div class="col-lg-12 col-height-2" >

                            </div>
                        </div>
                    </td>
                    <td width="300">
                        <div class="row">
                            <div class="col-lg-12 col-height-2" >

                            </div>
                        </div>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <script src="./assets/moment-2.22.2/moment-with-locales.min.js"></script>
    <script src="./assets/jquery-3.3.1/jquery-3.3.1.min.js"></script>
    <script src="./assets/jquery-ui-1.12.1/jquery-ui.min.js"></script>
    <script src="./assets/bootstrap-3.3.7/js/bootstrap.min.js"></script>
    <script>
        $(document).ready(function () {
            
            updateHeight();

            $(".col-lg-12").sortable({
                connectWith: ".col-lg-12",
                handle: ".panel-heading",
                //cancel: ".portlet-toggle",
                start: function (event, ui) {
                    ui.item.addClass('tilt');
                },
                stop: function (event, ui) {
                    ui.item.removeClass('tilt');
                    var id = $(ui.item).parent('.col-lg-12').attr('id');
                    alert(id);
                    updateHeight();
                }
            });
            $('#btnAgregar').on('click', function () {
                $('#colum-pendientes').append('<div class="panel panel-default" style="text-align: left;"> \
                                    <div class="panel-heading">Titulo</div> \
                                    <div class="panel-body"> \
                                        Descripcion \
                                    </div> \
                                    <table class="table table-bordered"> \
                                        <tr> \
                                            <td colspan="2">Dificultad</td> \
                                        </tr> \
                                        <tr> \
                                            <td>Inicio</td> \
                                            <td>Termino</td> \
                                        </tr> \
                                    </table> \
                                </div>');
                updateHeight();
            });

            function updateHeight() {
                var h1 = ($('#newheight').height() - 37) + 'px';
                var h2 =  ($('#newheight').height() - 79 ) + 'px';
                $('.col-height-2').css({ 'min-height': h1 });
                $('#colum-pendientes').css({ 'min-height': h2 });
            }
        });

    </script>
</body>

</html>